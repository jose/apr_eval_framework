--- gson/src/main/java/com/google/gson/internal/$Gson$Types.java	2024-07-18 03:58:12.317290466 -0700
+++ gson/src/main/java/com/google/gson/internal/$Gson$Types.java	2024-07-18 03:58:13.964357357 -0700
@@ -339,7 +339,12 @@
     while (true) {
       if (toResolve instanceof TypeVariable) {
         TypeVariable<?> typeVariable = (TypeVariable<?>) toResolve;
+        if (visitedTypeVariables.contains(typeVariable)) {
           // cannot reduce due to infinite recursion
+          return toResolve;
+        } else {
+          visitedTypeVariables.add(typeVariable);
+        }
         toResolve = resolveTypeVariable(context, contextRawType, typeVariable);
         if (toResolve == typeVariable) {
           return toResolve;
